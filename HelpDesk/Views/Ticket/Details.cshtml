 @{
    ViewData["Title"] = "Ticket Details";
    Layout = "~/Views/Shared/_Layout1.cshtml";
}

@model IEnumerable<Ticket>

<section class="content">
    <form method="post" asp-controller="ticket" asp-action="assign">

            <!-- Default box -->
            <div class="card">
        <div class="card-header">
            <h3 class="card-title">Ticket Detail</h3>

            <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                    <i class="fas fa-minus"></i>
                </button>

            </div>
        </div>
        <div class="card-body">
            <div class="row">

                <div class="col-12 col-md-12 col-lg-4 order-1 order-md-2">
                    @if(ViewBag.tickets.Supporter != null)
                    {
                        <h3 class="text-primary">Technical Support Information</h3>
                        <p class="text-muted">Your Support Information Below: </p>
                        <br>
                        <div class="text-muted">
                            <p class="text-sm">
                                Support Name
                                <b class="d-block">@(
                                ViewBag.tickets.Supporter != null ? ViewBag.tickets.Supporter.FullName : ""
                                )</b>
                            </p>
                            <p class="text-sm">
                                Email Address
                                <b class="d-block">@(
                                ViewBag.tickets.Supporter != null ? ViewBag.tickets.Supporter.Email : ""
                                )</b>
                            </p>
                            <p class="text-sm">
                                Phone Number
                                <b class="d-block">@(
                                ViewBag.tickets.Supporter != null ? ViewBag.tickets.Supporter.Phone : ""
                                )</b>
                            </p>
                        </div>

                    } else{
                        <select name="supporterId">
                                @foreach (var supporter in ViewBag.supporters)
                                {
                                <option value="@supporter.Id">@supporter.FullName</option>
                            }
                        </select>

                    }

                    <div class="text-center mt-5 mb-3">
                        @if (ViewBag.tickets.Supporter == null)
                        {
                            <button type="submit" class="btn btn-primary float-right" style="margin-right: 5px;">
                                <i class="fas fa-download"></i> Save
                            </button>
                        }
                    </div>

                </div>
                &nbsp;
                <div class="col-12 col-md-12 col-lg-8 order-2 order-md-1">
                    <div class="row">
                        <div class="col-12 col-sm-4">
                            <div class="info-box bg-light">
                                <div class="info-box-content">
                                    <span class="info-box-text text-center text-muted">Ticket ID</span>
                                    <span class="info-box-number text-center text-muted mb-0">#@ViewBag.tickets.Id</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-4">
                            <div class="info-box bg-light">
                                <div class="info-box-content">
                                    <span class="info-box-text text-center text-muted">Created Date</span>
                                    <span class="info-box-number text-center text-muted mb-0">@ViewBag.tickets.CreatedDate.ToString("MM/dd/yy")</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 col-sm-4">
                            <div class="info-box bg-light">
                                <div class="info-box-content">
                                    <span class="info-box-text text-center text-muted">Ticket Title</span>
                                    <span class="info-box-text text-center text-muted mb-0">@ViewBag.tickets.Title</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <h4>Detail Information</h4>
                            <div class="post">
                                <div class="user-block">

                                    <div class="text-muted">
                                        <p class="text-sm">
                                            Who sent this ticket?
                                            <b class="d-block">@ViewBag.tickets.Employee.FullName</b>
                                        <p class="text-sm">
                                            Email Address
                                            <b class="d-block"> @ViewBag.tickets.Employee.Email)</b>
                                        </p>
                                        <p class="text-sm">
                                            Phone Number
                                            <b class="d-block">@ViewBag.tickets.Employee.Phone </ b >    
                                        </ p >
                                </div>
                                <!-- /.user-block -->
                                <p>
                                    @ViewBag.tickets.Description
                                </p>

                            </div>

                                

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!-- /.card-body -->
    </div>
            <!-- /.card -->
        <input type="hidden" name="id" value="@ViewBag.tickets.Id" />

    </form>


</section>


